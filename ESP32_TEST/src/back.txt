#include <Arduino.h>
#include <WiFi.h>
#include "driver/adc.h"

#define LIGHT 1
#define DEEP 2
#define HIBER 3

void ReductionDesPeriph()
{
    // Code de test
    WiFi.mode(WIFI_OFF);
    btStop();
    adc_power_off();
}

void ModeSleep(int mode)
{
    switch (mode)
    {
        case LIGHT :
            // Test Light Sleep
            esp_light_sleep_start();
            break;
        
        case DEEP :
            // Test Deep Sleep
            esp_sleep_enable_timer_wakeup(10 * 1000000);
            esp_deep_sleep_start();
            break;

        case HIBER : 
            // Test Hibernation (si supporté)
            esp_sleep_pd_config(ESP_PD_DOMAIN_RTC_PERIPH, ESP_PD_OPTION_OFF);   
            break;
    }
}

void ModifyFrequency()
{
    // Test différentes fréquences
    setCpuFrequencyMhz(240); // Maximum
    //setCpuFrequencyMhz(160);
    //setCpuFrequencyMhz(80);  // Optimal
    //setCpuFrequencyMhz(40);  // Minimal
    //setCpuFrequencyMhz(20);  // Extreme low power
}

void ModePull()
{
    // Configuration anti-fuites
    //gpio_pullup_dis(GPIO_NUM_X);
    //gpio_pulldown_en(GPIO_NUM_X);
    //rtc_gpio_isolate(GPIO_NUM_X); // En deep sleep
}

void EnablePinHigh()
{
    // Se réveiller lorsque la broche GPIO 33 passe à l'état HAUT
    esp_sleep_enable_ext0_wakeup(GPIO_NUM_33, 1); // Niveau HAUT
}

void setup()
{

}

void loop()
{

}